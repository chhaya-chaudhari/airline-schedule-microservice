(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{115:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var a=n(31),o=n(7),r=n(139),i=n(264),c=n(106),l=n(219),s=n(105),d=n(222),u=n(61),j=n(98),h=n(0),p=n(39),b=n(40),f="http://localhost:9090/",m=f+"master-data-service/api/airports",O=n(88),g=n.n(O),v=function(e){return g.a.get(e.url,{headers:{}}).then((function(e){return e.data})).catch((function(e){return console.error(e.response),e.response}))},x=new(function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,[{key:"fetchFlightData",value:function(e){return function(e){return g.a.post(e.url,e.body,{headers:{}}).then((function(e){return e.data})).catch((function(e){return console.error(e.response.data),e.response.data}))}({url:"http://localhost:9090/connection-builder-service/api/flight-connections",body:e})}},{key:"fetchAirportDetails",value:function(e){return v({url:m+"/"+e})}},{key:"searchCode",value:function(e){return v({url:e})}}]),e}()),w=n(44),A=2.5,F="AIzaSyDEkxJNQFjBdFMzOueMCl1Qsk1RtPvAOvg",N=!1,T="auto",k=!1,y=!1,S={lat:36.15752575135864,lng:-.9788087008131827},C=n(136),I=n(132),D=n.n(I),M=n(99),W=(n(181),n(8));var H=Object(w.GoogleApiWrapper)({apiKey:F})((function(e){console.log("map",e.data),console.log("map",e.inputOption);var t=Object(h.useState)(e.data),n=Object(o.a)(t,1)[0],a=Object(h.useState)(!1),r=Object(o.a)(a,2),i=(r[0],r[1]),c=Object(h.useState)({showingInfoWindow:!1,activeMarker:{}}),l=Object(o.a)(c,2),s=l[0],d=l[1],u=Object(h.useState)({showingInfoWindow:!1,activeMarker:{}}),j=Object(o.a)(u,2),p=j[0],b=j[1],f=Object(h.useState)({showingInfoWindow:!1,activeMarker:{}}),m=Object(o.a)(f,2),O=m[0],g=m[1],v=Object(h.useState)([]),x=Object(o.a)(v,2),F=x[0],I=x[1];Object(h.useEffect)((function(){var t,n;i(!0),"JFK"===(null===(t=e.data)||void 0===t?void 0:t.connArrArpt)?I([{lat:19.08861,lng:72.86806},{lat:25.25278,lng:55.36444},{lat:40.63972,lng:-73.77889}]):"IAH"===(null===(n=e.data)||void 0===n?void 0:n.connArrArpt)&&I([{lat:19.08861,lng:72.86806},{lat:25.25278,lng:55.36444},{lat:29.9902,lng:-95.33707}])}),[n,e]);var H=e.data?" City Name:"+e.data.onwardDepArpt+"\n  Flight No: "+e.data.onwardFltNo+"\n  Flight Time: "+e.data.onwardDepTime+" (Dep Time)\n  Wait Time: \t-  ":"",L=e.data?" City Name:"+e.data.connArrArpt+"\n  Flight No: "+e.data.connFltNo+"\n  Flight Time: "+e.data.connArrTime+" (Arr Time)\n  Wait Time: \t-  ":"",P=e.data?"City Name:"+e.data.connDepArpt+"\n  Flight No: "+e.data.onwardFltNo+"\n  Flight Time: "+e.data.onwardArrTime+" (Arr Time)\n  Wait  Time: "+e.data.waitTime+"\n  Flight No: "+e.data.connFltNo+"\n  Flight Time: "+e.data.connDepTime+" (Dep Time) ":"";return Object(W.jsxs)(w.Map,{google:e.google,zoom:A,initialCenter:{lat:S.lat,lng:S.lng},streetViewControl:N,gestureHandling:T,mapTypeControl:k,fullscreenControl:y,center:{lat:S.lat,lng:S.lng},children:[Object(W.jsx)(w.Marker,{position:{lat:19.08861,lng:72.86806},onMouseover:function(e,t,n){d({activeMarker:t,showingInfoWindow:!0})}}),Object(W.jsx)(w.InfoWindow,{marker:s.activeMarker,visible:s.showingInfoWindow,children:Object(W.jsx)(M.a,{title:H,placement:"bottom",children:Object(W.jsx)("p",{children:"Mumbai BOM"})})}),Object(W.jsx)(w.Marker,{position:{lat:25.25278,lng:55.36444},onMouseover:function(e,t,n){b({activeMarker:t,showingInfoWindow:!0})}}),Object(W.jsx)(w.InfoWindow,{marker:p.activeMarker,visible:p.showingInfoWindow,children:Object(W.jsx)(M.a,{title:P,placement:"top",children:Object(W.jsx)("p",{children:"Dubai DXB"})})}),Object(W.jsx)(w.Marker,{position:"IAH"==e.inputOption?{lat:29.9902,lng:-95.33707}:{lat:40.63972,lng:-73.77889},onMouseover:function(e,t,n){g({activeMarker:t,showingInfoWindow:!0})}}),Object(W.jsx)(w.InfoWindow,{marker:O.activeMarker,visible:O.showingInfoWindow,children:Object(W.jsx)(M.a,{title:L,placement:"bottom",children:Object(W.jsx)("p",{children:"IAH"==e.inputOption?"Houston IAH":"New York JFK"})})}),Object(W.jsx)(C.a,{path:F,geodesic:!0,options:{strokeColor:"#d14",strokeOpacity:1,strokeWeight:1.5,offset:"0%",icons:[{strokeWeight:2,icon:D.a,offset:"0%",repeat:"35px"}]}})]})})),L=n(133),P=n(266),z=n(59),B=n.n(z),J=[{field:"id",headerName:"Id",hide:!0},{field:"onwardFltNo",headerName:"Onward Flight",width:130},{field:"onwardDepArpt",headerName:"Dep Airport",width:130},{field:"onwardArrArpt",headerName:"Arrival Airport",width:130},{field:"onwardDepTime",headerName:"Dep Time",width:130},{field:"onwardArrTime",headerName:"Arrival Time",width:130},{field:"connFltNo",headerName:"Connecting Flight",width:130},{field:"connDepArpt",headerName:"Dep Airport",width:130},{field:"connArrArpt",headerName:"Arrival Airport",width:130},{field:"connDepTime",headerName:"Dep Time",width:130},{field:"connArrTime",headerName:"Arrival Time",width:130}];function E(){var e=Object(h.useState)([]),t=Object(o.a)(e,2),n=t[0],p=t[1],b=Object(h.useState)(),f=Object(o.a)(b,2),m=f[0],O=f[1],g=Object(h.useState)({q:"",dataset:[]}),v=Object(o.a)(g,2),w=v[0],A=v[1],F="http://localhost:9090/master-data-service/api/airports/search-codes",N=Object(h.useState)(!1),T=Object(o.a)(N,2),k=T[0],y=T[1],S=Object(h.useState)(!1),C=Object(o.a)(S,2),I=C[0],D=(C[1],function(e,t){F&&A((function(e){return Object(a.a)(Object(a.a)({},e),{},{dataset:[]})})),console.log("closing")}),M=function(e,t,n){"click"!==e.type&&F&&""!==t&&(z(t),A((function(e){return Object(a.a)(Object(a.a)({},e),{},{q:t})})))},z=function(e){var t;y(!0),t=-1===F.indexOf("?")?F+"?code="+"".concat(e):F+"&code="+"".concat(e),console.log("url::::",t),x.searchCode(t).then((function(e){var t;console.log(e),t=e.map((function(e){return{label:e,value:e}})),console.log(t),A((function(e){return Object(a.a)(Object(a.a)({},e),{},{dataset:t})})),y(!1)}))};return Object(W.jsx)(j.b,{initialValues:{from:"",to:""},onSubmit:function(e){var t={departureAirport:e.from,arrivalAirport:e.to};x.fetchFlightData(t).then((function(e){console.log("response",e),e.map((function(e){var t,n=B()(e.connDepTime,"HH:mm:ss a"),a=B()(e.onwardArrTime,"HH:mm:ss a");a>n?(t=n.diff(B()("00:00:00","HH:mm:ss a")),t+=B()("24:00:00","HH:mm:ss a").diff(a),t=B.a.duration(t),console.log("dif",t.hours()),e.waitTime=t.hours()+"h "+t.minutes()+"m"):(t=B.a.duration(n.diff(a)),e.waitTime=t.hours()+"h "+t.minutes()+"m"),e.id=e.onwardFltNo+e.connFltNo})),p(e)}))},children:function(e){return Object(W.jsxs)(r.a,{style:{padding:"30px"},children:[Object(W.jsxs)(j.a,{autoComplete:"off",children:[Object(W.jsxs)(i.a,{container:!0,spacing:2,children:[Object(W.jsx)(i.a,{item:!0,xs:4,className:"row",children:Object(W.jsx)(c.a,{children:"From Airport : "})}),Object(W.jsx)(i.a,{item:!0,xs:8,className:"row",children:Object(W.jsx)(P.a,{freeSolo:!0,name:"from",id:"from",autoComplete:!1,options:w.dataset,renderOption:function(e){return Object(W.jsx)(l.a,{variant:"p",children:e.label})},getOptionLabel:function(e){return e.label},getOptionSelected:function(e,t){return!0},onChange:function(t,n){return function(e,t,n){n.values.from=null===t||void 0===t?void 0:t.value}(0,n,e)},onInputChange:M,onClose:D,renderInput:function(e){return Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)("div",{className:"autoSelect-txt-div",children:[Object(W.jsx)(s.a,Object(a.a)(Object(a.a)({autoComplete:"false"},e),{},{label:"Search by Flight code",variant:"outlined",margin:"dense",InputLabelProps:{style:{fontSize:"16px",fontStyle:"normal",color:"#5A5A5A"}}})),k&&Object(W.jsx)(d.a,{className:"auto-search-loading-icon"})]})})}})}),Object(W.jsx)(i.a,{item:!0,xs:4,children:Object(W.jsx)(c.a,{children:"To Airport : "})}),Object(W.jsx)(i.a,{item:!0,xs:8,children:Object(W.jsx)(P.a,{freeSolo:!0,name:"to",id:"to",autoComplete:!1,options:w.dataset,renderOption:function(e){return Object(W.jsx)(l.a,{variant:"p",children:e.label})},getOptionLabel:function(e){return e.label},getOptionSelected:function(e,t){return!0},onChange:function(t,n){return function(e,t,n){n.values.to=null===t||void 0===t?void 0:t.value}(0,n,e)},onInputChange:M,onClose:D,renderInput:function(e){return Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)("div",{className:"autoSelect-txt-div",children:[Object(W.jsx)(s.a,Object(a.a)(Object(a.a)({autoComplete:"false"},e),{},{label:"Search by Flight code",variant:"outlined",margin:"dense",InputLabelProps:{style:{fontSize:"16px",fontStyle:"normal",color:"#5A5A5A"}}})),I&&Object(W.jsx)(d.a,{className:"auto-search-loading-icon"})]})})}})}),Object(W.jsx)(i.a,{item:!0,xs:12,children:Object(W.jsx)(u.a,{variant:"contained",color:"primary",type:"submit",children:"Search"})})]}),Object(W.jsx)(i.a,{container:!0,style:{height:350,width:"100%",padding:"30px"},children:Object(W.jsx)(L.a,{rows:n,columns:J,onRowClick:function(e){console.log(e),O(e.row)},hideFooter:!0})})]}),Object(W.jsx)(i.a,{container:!0,children:Object(W.jsx)("div",{style:{width:"200vh",height:"100vh",position:"relative"},children:Object(W.jsx)(H,{data:m,inputOption:e.values.to})})})]})}})}},160:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),i=n.n(r),c=(n(160),n(115),n(265)),l=n(135),s=n(31),d=n(39),u=n(40),j=n(72),h=n(71),p=n(8),b=function(e){return function(t){Object(j.a)(a,t);var n=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=n.call.apply(n,[this].concat(o))).state={component:null},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this;e().then((function(e){t.setState({component:e.default})}))}},{key:"render",value:function(){var e=this.state.component;return e?Object(p.jsx)(e,Object(s.a)({},this.props)):Object(p.jsx)(p.Fragment,{})}}]),a}(a.Component)},f=n(134);b((function(){return Promise.resolve().then(n.bind(null,134))}));var m=function(){return Object(a.useEffect)((function(){}),[]),Object(p.jsx)(l.a,{children:Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(c.a,{children:Object(p.jsx)(f.default,{})})})})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,268)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),r(e),i(e)}))};i.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(m,{})}),document.getElementById("root")),O()}},[[212,1,2]]]);
//# sourceMappingURL=main.834441d5.chunk.js.map